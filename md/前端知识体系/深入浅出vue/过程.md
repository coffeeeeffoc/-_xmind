# 过程

## 1.模板

## 2.模板编译

### 1.解析器

- 作法：将模板解析成AST

	- AST，Abstract Syntax Tree，抽象语法树

- 详细：有很多小解析器，包括

	- 过滤器解析器

		- 解析过滤器

	- HTML解析器

		- 最重要的最核心的解析器
		- 解析模板，可以触发很多钩子函数

			- start(tag, attrs, unary)
			- end
			- chars(text)
			- comment(text)

		- 一个栈 ，来记录层级关系
		- 解析的模板类型

			- 文本
			- HTML注释

				- 例如<!--我是注释-->

			- 条件注释

				- 例如，<!--[if !IE]>我是注释<![endif]-->

			- DOCTYPE
			- 结束标签
			- 开始标签

	- 文本解析器

		- 解析变量

			- 变量_s(var)和非变量'text'都放在数组中，通过join('+')来生成字符串拼接的字符串表达式

### 2.优化器

- 作法：遍历AST标记静态节点

	- 静态节点指不包含任何变量的节点

- 作用：避免一些无用功，提升性能

	- 静态节点除了首次渲染，之后不再需要重新渲染操作

### 3.代码生成器

- 使用AST生成渲染函数

	- 生成代码字符串，然后作为参数传递给new Function()来生成渲染函数

## 3.渲染函数

## 4.vnode

## 5.用户界面

